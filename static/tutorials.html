

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorials &mdash; nectar 0.0.11 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="_static/nectar-icon_bw.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=0c446633"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="hive-nectar CLI" href="cli.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            nectar
              <img src="_static/nectar-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#bundle-many-operations">Bundle Many Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#use-nobroadcast-for-testing">Use nobroadcast for testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clear-blockchainobject-caching">Clear BlockchainObject Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-sell-script">Simple Sell Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sell-at-a-timely-rate">Sell at a timely rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#batch-api-calls-on-appbase">Batch api calls on AppBase</a></li>
<li class="toctree-l2"><a class="reference internal" href="#account-history">Account history</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transactionbuilder">Transactionbuilder</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">hive-nectar CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="apidefinitions.html">Api Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing to nectar</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support and Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices and Tables</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">nectar</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorials</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Link to this heading"></a></h1>
<section id="bundle-many-operations">
<h2>Bundle Many Operations<a class="headerlink" href="#bundle-many-operations" title="Link to this heading"></a></h2>
<p>With Steem, you can bundle multiple operations into a single
transactions. This can be used to do a multi-send (one sender, multiple
receivers), but it also allows to use any other kind of operation. The
advantage here is that the user can be sure that the operations are
executed in the same order as they are added to the transaction.</p>
<p>A block can only include one vote operation and
one comment operation from each sender.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">Account</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.comment</span><span class="w"> </span><span class="kn">import</span> <span class="n">Comment</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.instance</span><span class="w"> </span><span class="kn">import</span> <span class="n">set_shared_blockchain_instance</span>

<span class="c1"># not a real working key</span>
<span class="n">wif</span> <span class="o">=</span> <span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span>

<span class="n">stm</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">(</span>
    <span class="n">bundle</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Enable bundle broadcast</span>
    <span class="c1"># nobroadcast=True, # Enable this for testing</span>
    <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="n">wif</span><span class="p">],</span>
<span class="p">)</span>
<span class="c1"># Set stm as shared instance</span>
<span class="n">set_shared_blockchain_instance</span><span class="p">(</span><span class="n">stm</span><span class="p">)</span>

<span class="c1"># Account and Comment will use now stm</span>
<span class="n">account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>

<span class="c1"># Post</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">(</span><span class="s2">&quot;@gtg/witness-gtg-log&quot;</span><span class="p">)</span>

<span class="n">account</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="s2">&quot;test1&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;STEEM&quot;</span><span class="p">)</span>
<span class="n">account</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="s2">&quot;test2&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;STEEM&quot;</span><span class="p">)</span>
<span class="n">account</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="s2">&quot;test3&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;SBD&quot;</span><span class="p">)</span>
<span class="c1"># Upvote post with 25%</span>
<span class="n">c</span><span class="o">.</span><span class="n">upvote</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="n">voter</span><span class="o">=</span><span class="n">account</span><span class="p">)</span>

<span class="n">pprint</span><span class="p">(</span><span class="n">stm</span><span class="o">.</span><span class="n">broadcast</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="use-nobroadcast-for-testing">
<h2>Use nobroadcast for testing<a class="headerlink" href="#use-nobroadcast-for-testing" title="Link to this heading"></a></h2>
<p>When using  <cite>nobroadcast=True</cite> the transaction is not broadcasted but printed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">Account</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.instance</span><span class="w"> </span><span class="kn">import</span> <span class="n">set_shared_blockchain_instance</span>

<span class="c1"># Only for testing not a real working key</span>
<span class="n">wif</span> <span class="o">=</span> <span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span>

<span class="c1"># set nobroadcast always to True, when testing</span>
<span class="n">testnet</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">(</span>
    <span class="n">nobroadcast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="c1"># Set to false when want to go live</span>
    <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="n">wif</span><span class="p">],</span>
<span class="p">)</span>
<span class="c1"># Set testnet as shared instance</span>
<span class="n">set_shared_blockchain_instance</span><span class="p">(</span><span class="n">testnet</span><span class="p">)</span>

<span class="c1"># Account will use now testnet</span>
<span class="n">account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>

<span class="n">pprint</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="s2">&quot;test1&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;STEEM&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>When executing the script above, the output will be similar to the following:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">Not</span><span class="w"> </span><span class="nx">broadcasting</span><span class="w"> </span><span class="nx">anything</span><span class="o">!</span>
<span class="p">{</span><span class="s1">&#39;expiration&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;2018-05-01T16:16:57&#39;</span><span class="p">,</span>
<span class="w"> </span><span class="s1">&#39;extensions&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w"> </span><span class="s1">&#39;operations&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[[</span><span class="s1">&#39;transfer&#39;</span><span class="p">,</span>
<span class="w">                 </span><span class="p">{</span><span class="s1">&#39;amount&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;1.000 STEEM&#39;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">&#39;from&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test&#39;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">&#39;memo&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span>
<span class="w">                  </span><span class="s1">&#39;to&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;test1&#39;</span><span class="p">}]],</span>
<span class="w"> </span><span class="s1">&#39;ref_block_num&#39;</span><span class="o">:</span><span class="w"> </span><span class="mf">33020</span><span class="p">,</span>
<span class="w"> </span><span class="s1">&#39;ref_block_prefix&#39;</span><span class="o">:</span><span class="w"> </span><span class="mf">2523628005</span><span class="p">,</span>
<span class="w"> </span><span class="s1">&#39;signatures&#39;</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;1f57da50f241e70c229ed67b5d61898e792175c0f18ae29df8af414c46ae91eb5729c867b5d7dcc578368e7024e414c237f644629cb0aa3ecafac3640871ffe785&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</section>
<section id="clear-blockchainobject-caching">
<h2>Clear BlockchainObject Caching<a class="headerlink" href="#clear-blockchainobject-caching" title="Link to this heading"></a></h2>
<p>Each BlockchainObject (Account, Comment, Vote, Witness, Amount, …) has a glocal cache. This cache
stores all objects and could lead to increased memory consumption. The global cache can be cleared
with a <cite>clear_cache()</cite> call from any BlockchainObject.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">Account</span>

<span class="n">account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">_cache</span><span class="p">))</span>
<span class="n">account1</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s2">&quot;test1&quot;</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">_cache</span><span class="p">))</span>
<span class="n">pprint</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">account1</span><span class="o">.</span><span class="n">_cache</span><span class="p">))</span>
<span class="n">account</span><span class="o">.</span><span class="n">clear_cache</span><span class="p">()</span>
<span class="n">pprint</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">_cache</span><span class="p">))</span>
<span class="n">pprint</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">account1</span><span class="o">.</span><span class="n">_cache</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="simple-sell-script">
<h2>Simple Sell Script<a class="headerlink" href="#simple-sell-script" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.market</span><span class="w"> </span><span class="kn">import</span> <span class="n">Market</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.price</span><span class="w"> </span><span class="kn">import</span> <span class="n">Price</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.amount</span><span class="w"> </span><span class="kn">import</span> <span class="n">Amount</span>

<span class="c1"># Only for testing not a real working key</span>
<span class="n">wif</span> <span class="o">=</span> <span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span>

<span class="c1">#</span>
<span class="c1"># Instantiate Steem (pick network via API node)</span>
<span class="c1">#</span>
<span class="n">steem</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">(</span>
    <span class="n">nobroadcast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>   <span class="c1"># &lt;&lt;--- set this to False when you want to fire!</span>
    <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="n">wif</span><span class="p">]</span>          <span class="c1"># &lt;&lt;--- use your real keys, when going live!</span>
<span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># This defines the market we are looking at.</span>
<span class="c1"># The first asset in the first argument is the *quote*</span>
<span class="c1"># Sell and buy calls always refer to the *quote*</span>
<span class="c1">#</span>
<span class="n">market</span> <span class="o">=</span> <span class="n">Market</span><span class="p">(</span><span class="s2">&quot;SBD:STEEM&quot;</span><span class="p">,</span>
    <span class="n">blockchain_instance</span><span class="o">=</span><span class="n">steem</span>
<span class="p">)</span>

<span class="c1">#</span>
<span class="c1"># Sell an asset for a price with amount (quote)</span>
<span class="c1">#</span>
<span class="nb">print</span><span class="p">(</span><span class="n">market</span><span class="o">.</span><span class="n">sell</span><span class="p">(</span>
    <span class="n">Price</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="s2">&quot;STEEM/SBD&quot;</span><span class="p">),</span>
    <span class="n">Amount</span><span class="p">(</span><span class="s2">&quot;0.01 SBD&quot;</span><span class="p">)</span>
<span class="p">))</span>
</pre></div>
</div>
</section>
<section id="sell-at-a-timely-rate">
<h2>Sell at a timely rate<a class="headerlink" href="#sell-at-a-timely-rate" title="Link to this heading"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">threading</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.market</span><span class="w"> </span><span class="kn">import</span> <span class="n">Market</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.price</span><span class="w"> </span><span class="kn">import</span> <span class="n">Price</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.amount</span><span class="w"> </span><span class="kn">import</span> <span class="n">Amount</span>

<span class="c1"># Only for testing not a real working key</span>
<span class="n">wif</span> <span class="o">=</span> <span class="s2">&quot;5KQwrPbwdL6PhXujxW37FSSQZ1JiwsST4cqQzDeyXtP79zkvFD3&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">sell</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sell an asset for a price with amount (quote)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">market</span><span class="o">.</span><span class="n">sell</span><span class="p">(</span>
        <span class="n">Price</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="s2">&quot;SBD/STEEM&quot;</span><span class="p">),</span>
        <span class="n">Amount</span><span class="p">(</span><span class="s2">&quot;0.01 STEEM&quot;</span><span class="p">)</span>
    <span class="p">))</span>

    <span class="n">threading</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="n">sell</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1">#</span>
    <span class="c1"># Instantiate Steem (pick network via API node)</span>
    <span class="c1">#</span>
    <span class="n">steem</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">(</span>
        <span class="n">nobroadcast</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>   <span class="c1"># &lt;&lt;--- set this to False when you want to fire!</span>
        <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="n">wif</span><span class="p">]</span>          <span class="c1"># &lt;&lt;--- use your real keys, when going live!</span>
    <span class="p">)</span>

    <span class="c1">#</span>
    <span class="c1"># This defines the market we are looking at.</span>
    <span class="c1"># The first asset in the first argument is the *quote*</span>
    <span class="c1"># Sell and buy calls always refer to the *quote*</span>
    <span class="c1">#</span>
    <span class="n">market</span> <span class="o">=</span> <span class="n">Market</span><span class="p">(</span><span class="s2">&quot;STEEM:SBD&quot;</span><span class="p">,</span>
        <span class="n">blockchain_instance</span><span class="o">=</span><span class="n">steem</span>
    <span class="p">)</span>

    <span class="n">sell</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="batch-api-calls-on-appbase">
<h2>Batch api calls on AppBase<a class="headerlink" href="#batch-api-calls-on-appbase" title="Link to this heading"></a></h2>
<p>Batch api calls are possible with AppBase RPC nodes.
If you call a Api-Call with add_to_queue=True it is not submitted but stored in rpc_queue.
When a call with add_to_queue=False (default setting) is started,
the complete queue is sended at once to the node. The result is a list with replies.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="n">stm</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">(</span><span class="s2">&quot;https://api.steemit.com&quot;</span><span class="p">)</span>
<span class="n">stm</span><span class="o">.</span><span class="n">rpc</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="n">add_to_queue</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">stm</span><span class="o">.</span><span class="n">rpc</span><span class="o">.</span><span class="n">rpc_queue</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;condenser_api.get_config&#39;</span><span class="p">,</span> <span class="s1">&#39;jsonrpc&#39;</span><span class="p">:</span> <span class="s1">&#39;2.0&#39;</span><span class="p">,</span> <span class="s1">&#39;params&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">stm</span><span class="o">.</span><span class="n">rpc</span><span class="o">.</span><span class="n">get_block</span><span class="p">({</span><span class="s2">&quot;block_num&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span> <span class="n">api</span><span class="o">=</span><span class="s2">&quot;block&quot;</span><span class="p">,</span> <span class="n">add_to_queue</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="account-history">
<h2>Account history<a class="headerlink" href="#account-history" title="Link to this heading"></a></h2>
<p>Lets calculate the curation reward from the last 7 days:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">Account</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.amount</span><span class="w"> </span><span class="kn">import</span> <span class="n">Amount</span>

<span class="n">acc</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s2">&quot;gtg&quot;</span><span class="p">)</span>
<span class="n">stop</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="n">reward_vests</span> <span class="o">=</span> <span class="n">Amount</span><span class="p">(</span><span class="s2">&quot;0 VESTS&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">reward</span> <span class="ow">in</span> <span class="n">acc</span><span class="o">.</span><span class="n">history_reverse</span><span class="p">(</span><span class="n">stop</span><span class="o">=</span><span class="n">stop</span><span class="p">,</span> <span class="n">only_ops</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;curation_reward&quot;</span><span class="p">]):</span>
            <span class="n">reward_vests</span> <span class="o">+=</span> <span class="n">Amount</span><span class="p">(</span><span class="n">reward</span><span class="p">[</span><span class="s1">&#39;reward&#39;</span><span class="p">])</span>
<span class="n">curation_rewards_SP</span> <span class="o">=</span> <span class="n">acc</span><span class="o">.</span><span class="n">steem</span><span class="o">.</span><span class="n">vests_to_sp</span><span class="p">(</span><span class="n">reward_vests</span><span class="o">.</span><span class="n">amount</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Rewards are </span><span class="si">%.3f</span><span class="s2"> SP&quot;</span> <span class="o">%</span> <span class="n">curation_rewards_SP</span><span class="p">)</span>
</pre></div>
</div>
<p>Lets display all Posts from an account:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nectar.account</span><span class="w"> </span><span class="kn">import</span> <span class="n">Account</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.comment</span><span class="w"> </span><span class="kn">import</span> <span class="n">Comment</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">ContentDoesNotExistsException</span>
<span class="n">account</span> <span class="o">=</span> <span class="n">Account</span><span class="p">(</span><span class="s2">&quot;holger80&quot;</span><span class="p">)</span>
<span class="n">c_list</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="n">Comment</span><span class="p">,</span> <span class="n">account</span><span class="o">.</span><span class="n">history</span><span class="p">(</span><span class="n">only_ops</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">])):</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">permlink</span> <span class="ow">in</span> <span class="n">c_list</span><span class="p">:</span>
      <span class="k">continue</span>
    <span class="k">try</span><span class="p">:</span>
         <span class="n">c</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ContentDoesNotExistsException</span><span class="p">:</span>
         <span class="k">continue</span>
    <span class="n">c_list</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">permlink</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">is_comment</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">c</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="transactionbuilder">
<h2>Transactionbuilder<a class="headerlink" href="#transactionbuilder" title="Link to this heading"></a></h2>
<p>Sign transactions with nectar without using the wallet and build the transaction by hand.
Example with one operation with and without the wallet:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.transactionbuilder</span><span class="w"> </span><span class="kn">import</span> <span class="n">TransactionBuilder</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectarbase</span><span class="w"> </span><span class="kn">import</span> <span class="n">operations</span>
<span class="n">stm</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">()</span>
<span class="c1"># Uncomment the following when using a wallet:</span>
<span class="c1"># stm.wallet.unlock(&quot;secret_password&quot;)</span>
<span class="n">tx</span> <span class="o">=</span> <span class="n">TransactionBuilder</span><span class="p">(</span><span class="n">blockchain_instance</span><span class="o">=</span><span class="n">stm</span><span class="p">)</span>
<span class="n">op</span> <span class="o">=</span> <span class="n">operations</span><span class="o">.</span><span class="n">Transfer</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s1">&#39;user_a&#39;</span><span class="p">,</span>
                            <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="s1">&#39;user_b&#39;</span><span class="p">,</span>
                            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="s1">&#39;1.000 SBD&#39;</span><span class="p">,</span>
                            <span class="s2">&quot;memo&quot;</span><span class="p">:</span> <span class="s1">&#39;test 2&#39;</span><span class="p">}))</span>
<span class="n">tx</span><span class="o">.</span><span class="n">appendOps</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
<span class="c1"># Comment appendWif out and uncomment appendSigner when using a stored key from the wallet</span>
<span class="n">tx</span><span class="o">.</span><span class="n">appendWif</span><span class="p">(</span><span class="s1">&#39;5.....&#39;</span><span class="p">)</span> <span class="c1"># `user_a`</span>
<span class="c1"># tx.appendSigner(&#39;user_a&#39;, &#39;active&#39;)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">sign</span><span class="p">()</span>
<span class="n">tx</span><span class="o">.</span><span class="n">broadcast</span><span class="p">()</span>
</pre></div>
</div>
<p>Example with signing and broadcasting two operations:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">nectar</span><span class="w"> </span><span class="kn">import</span> <span class="n">Steem</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectar.transactionbuilder</span><span class="w"> </span><span class="kn">import</span> <span class="n">TransactionBuilder</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nectarbase</span><span class="w"> </span><span class="kn">import</span> <span class="n">operations</span>
<span class="n">stm</span> <span class="o">=</span> <span class="n">Steem</span><span class="p">()</span>
<span class="c1"># Uncomment the following when using a wallet:</span>
<span class="c1"># stm.wallet.unlock(&quot;secret_password&quot;)</span>
<span class="n">tx</span> <span class="o">=</span> <span class="n">TransactionBuilder</span><span class="p">(</span><span class="n">blockchain_instance</span><span class="o">=</span><span class="n">stm</span><span class="p">)</span>
<span class="n">ops</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">op</span> <span class="o">=</span> <span class="n">operations</span><span class="o">.</span><span class="n">Transfer</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="s1">&#39;user_a&#39;</span><span class="p">,</span>
                            <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="s1">&#39;user_b&#39;</span><span class="p">,</span>
                            <span class="s2">&quot;amount&quot;</span><span class="p">:</span> <span class="s1">&#39;1.000 SBD&#39;</span><span class="p">,</span>
                            <span class="s2">&quot;memo&quot;</span><span class="p">:</span> <span class="s1">&#39;test 2&#39;</span><span class="p">}))</span>
<span class="n">ops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
<span class="n">op</span> <span class="o">=</span> <span class="n">operations</span><span class="o">.</span><span class="n">Vote</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;voter&quot;</span><span class="p">:</span> <span class="n">v</span><span class="p">,</span>
                        <span class="s2">&quot;author&quot;</span><span class="p">:</span> <span class="n">author</span><span class="p">,</span>
                        <span class="s2">&quot;permlink&quot;</span><span class="p">:</span> <span class="n">permlink</span><span class="p">,</span>
                        <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">percent</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)})</span>
<span class="n">ops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">op</span><span class="p">)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">appendOps</span><span class="p">(</span><span class="n">ops</span><span class="p">)</span>
<span class="c1"># Comment appendWif out and uncomment appendSigner when using a stored key from the wallet</span>
<span class="n">tx</span><span class="o">.</span><span class="n">appendWif</span><span class="p">(</span><span class="s1">&#39;5.....&#39;</span><span class="p">)</span> <span class="c1"># `user_a`</span>
<span class="c1"># tx.appendSigner(&#39;user_a&#39;, &#39;active&#39;)</span>
<span class="n">tx</span><span class="o">.</span><span class="n">sign</span><span class="p">()</span>
<span class="n">tx</span><span class="o">.</span><span class="n">broadcast</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cli.html" class="btn btn-neutral float-right" title="hive-nectar CLI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017, ChainSquad GmbH, 2018-2020, Holger Nahrstaedt, 2025, Michael Garcia.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>